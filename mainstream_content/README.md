# Mainstream content

## Content Store JSON

This is populated with data from the content store.

These were generated by getting a list of paths out of Publishing API:

```
k exec -it deploy/publishing-api -- rails runner 'puts Edition.where(state: "published", publishing_app: "publisher").where.not(document_type: %w[gone redirect]).pluck(:base_path).join("\n")' > base_paths.txt
```

with a little munging after to remove extra outputs to stdout and fixing line breaks.

Then create the data with `ruby retrieve_content_store_json.rb`.

## Creating chunked data for search

You will need an OpenAI access token. Add it to .env in this directory with contents like so:

```
OPENAI_ACCESS_TOKEN=<YOUR_TOKEN>
```

You can generate the chunked JSON with `ruby create_search_json.rb`
